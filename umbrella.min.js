function isJson(e){try{var t=JSON.parse(e);if(t&&typeof t==="object"&&t!==null){return t}}catch(n){}return false}function ajax(e,t,n,r,i){if(i)i();t=t+"&umbrella=true";var s=new XMLHttpRequest;s.open("POST",e,true);s.onload=function(){var e=this.status;if(e<200||e>=400){if(r){r(e)}return false}var t=this.response;if(!isJson(t)){n(t);return false}var i=JSON.parse(t);if(i.success){if(n){if(i.umbrella){n(i.data)}else{n(i)}}}else{if(r){if(i.umbrella)r(i.error);else r(i)}}};s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");s.send(t)}function node(e){return u(e).first()}var u=function(e){if(!(this instanceof u)){return new u(e)}this.nodes=[];if(typeof e=="object"&&e.nodeName){this.nodes=[e]}if(typeof e=="string"){var t=document.querySelectorAll(e);this.nodes=Array.prototype.slice.call(t,0)}return this};u.prototype.each=function(e){for(var t=0;t<this.nodes.length;t++){var n=e(this.nodes[t],t);if(n)this.nodes[t]=n}};u.prototype.first=function(){if(this.nodes.length>0){return this.nodes[0]}};u.prototype.parent=function(){this.each(function(e,t){return e.parentNode});return this};u.prototype.html=function(e){if(e!==undefined){this.each(function(t){t.innerHTML=e});return this}else{return this.first().innerHTML}};u.prototype.remove=function(){this.each(function(e){e.parentNode.removeChild(e)})};u.prototype.adjacent=function(e,t){this.each(function(n){n.insertAdjacentHTML(e,t)});return this};u.prototype.before=function(e){this.adjacent("beforebegin",e);return this};u.prototype.prepend=function(e){this.adjacent("afterbegin",e);return this};u.prototype.append=function(e){this.adjacent("beforeend",e);return this};u.prototype.after=function(e){this.adjacent("afterend",e);return this};u.prototype.addClass=function(e){this.each(function(t){t.classList.add(e)});return this};u.prototype.removeClass=function(e){this.each(function(t){t.classList.remove(e)});return this};u.prototype.hasClass=function(e){return this.first().classList.contains(e)};u.prototype.attr=function(e,t){if(t){this.first().setAttribute(e,t);return this}return this.first().getAttribute(e)||""};u.prototype.scroll=function(e){var t=this.first();t.scrollTop=t.scrollTop+e.getBoundingClientRect().top;return this};u.prototype.serialize=function(){function r(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}var e=this.first();var t,n="";for(t=e.elements.length-1;t>=0;t=t-1){var i=e.elements[t];if(i.name===""){continue}switch(i.type){case"file":break;case"checkbox":case"radio":if(!i.checked)break;default:n+="&"+r(i.name)+"="+r(i.value)}}return n};u.prototype.on=function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++){this.each(function(e){e.addEventListener(n[r],t)})}return this};u.prototype.click=function(e){this.on("click",e);return this};u.prototype.ajax=function(e,t,n){this.on("submit",function(r){r.preventDefault();ajax(u(this).attr("action"),u(this).serialize(),e,t,n)});return this};u.defineStatus=function(e,t,n,r){r=r||e;if(e){u.prototype[e]=function(){this.addClass(r);return this}}if(t){u.prototype[t]=function(){this.removeClass(r);return this}}if(n){u.prototype[n]=function(){return this.hasClass(r)}}};u.defineStatus("active","inactive","isActive");u.defineStatus("error","success","hasError");u.defineStatus("loading","loaded","isLoading")
